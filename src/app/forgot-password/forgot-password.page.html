<ion-content class="ion-padding forgot-password-page">
  <div class="forgot-password-container">
    <h2 class="title">Lupa Password</h2>
    <p class="subtitle">Masukkan NIK anda untuk verifikasi</p>

    <!-- Step 1: Input NIK -->
    <form *ngIf="!nikValid" (ngSubmit)="checkNik()">
      <ion-item lines="inset">
        <ion-icon name="person-outline" slot="start"></ion-icon>
        <ion-input placeholder="NIK" [(ngModel)]="nik" name="nik" required clearInput></ion-input>
      </ion-item>

      <ion-button expand="block" color="primary" type="submit" shape="round" [disabled]="loading">
        {{ loading ? 'Memeriksa...' : 'Lanjut' }}
      </ion-button>
    </form>

    <!-- Step 2: Input Password Baru -->
    <form *ngIf="nikValid" (ngSubmit)="resetPassword()">
      <ion-item lines="inset">
        <ion-icon name="lock-closed-outline" slot="start"></ion-icon>
        <ion-input placeholder="Password Baru" [(ngModel)]="newPassword" name="newPassword" type="password" required></ion-input>
      </ion-item>

      <ion-item lines="inset">
        <ion-icon name="lock-closed-outline" slot="start"></ion-icon>
        <ion-input placeholder="Konfirmasi Password" [(ngModel)]="confirmPassword" name="confirmPassword" type="password" required></ion-input>
      </ion-item>

      <ion-button expand="block" color="success" type="submit" shape="round">Reset Password</ion-button>
    </form>

    <!-- Notifikasi -->
    <ion-text color="danger" *ngIf="errorMessage">
      <p class="error-msg">{{ errorMessage }}</p>
    </ion-text>

    <ion-text color="success" *ngIf="successMessage">
      <p class="success-msg">{{ successMessage }}</p>
    </ion-text>

  </div>
</ion-content>
